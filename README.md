# 化学工場時系列データ解析アプリケーション

このStreamlitアプリケーションは、化学工場の時系列データを解析するためのツールです。データのアップロード、前処理、時系列分析、モデリング、予測など、一連のデータ解析プロセスをサポートします。

## 機能

1. データ読み込み: CSVまたはExcelファイルからデータをアップロード
2. データ前処理: 欠損値処理、外れ値検出、スケーリング
3. 時系列分析: 定常性チェック、自己相関分析、季節性分解
4. モデリング: ARIMA、SARIMA、Prophetモデルの適用
5. 予測: 将来の値の予測と可視化

## インストール

1. このリポジトリをクローンまたはダウンロードします。

```
git clone https://github.com/knagamatsu/time_series_analysis.git
cd time_series_analysis
```

2. 必要なパッケージをインストールします。

```
pip install -r requirements.txt
```

注意: このプロジェクトはNumPy 2.0未満のバージョンを使用します。

## 使用方法

1. アプリケーションを起動します。

```
streamlit run app.py
```

2. ウェブブラウザが自動的に開き、アプリケーションのインターフェースが表示されます。

3. 画面左のサイドバーに「ナビゲーション」メニューがあります。これを使用して、アプリケーションの各機能（ページ）間を移動します。

4. 各ページでの操作:

   a. データ読み込み:
      - 「ナビゲーション」メニューから「データ読み込み」を選択します。
      - 「ファイルをアップロード」ボタンをクリックし、CSVまたはExcelファイルを選択します。
      - アップロードが完了すると、データのプレビューと基本統計情報が表示されます。

   b. データ前処理:
      - 「ナビゲーション」メニューから「データ前処理」を選択します。
      - 欠損値の処理方法、外れ値検出のしきい値、スケーリング方法を選択します。
      - 「前処理を実行」ボタンをクリックして、選択した処理を適用します。

   c. 時系列分析:
      - 「ナビゲーション」メニューから「時系列分析」を選択します。
      - 分析する列を選択します。
      - 時系列プロット、ADF検定結果、自己相関・偏自己相関プロット、季節性分解の結果が自動的に表示されます。

   d. モデリング:
      - 「ナビゲーション」メニューから「モデリング」を選択します。
      - 使用するモデル（ARIMA、SARIMA、Prophet）を選択し、パラメータを設定します。
      - 「モデルを学習」ボタンをクリックして、選択したモデルを学習させます。

   e. 予測:
      - 「ナビゲーション」メニューから「予測」を選択します。
      - 予測期間（日数）を設定します。
      - 「予測を実行」ボタンをクリックして、将来の値を予測します。
      - 予測結果のグラフと数値データが表示されます。
      - 「予測結果をCSVでダウンロード」ボタンをクリックして、結果をダウンロードできます。

5. 各ステップは順番に実行する必要があります。前のステップが完了していない場合、警告メッセージが表示されます。

6. 任意のステップで戻って修正や再実行を行うことができます。その場合、「ナビゲーション」メニューを使用して目的のページに移動し、必要な調整を行います。

注意: 
- 「ナビゲーション」メニューはページ間の移動に使用します。
- 各ページ内のボタンやコントロールは、そのページ固有の操作を実行するために使用します。
- データの状態は保持されるため、以前のステップに戻って変更を加えた場合、後続のステップを再実行する必要があるかもしれません。

## サンプルデータ

このプロジェクトには、テストや学習目的で使用できるサンプルデータが含まれています。サンプルデータは `sample_data` ディレクトリにあります。

### サンプルデータの生成

サンプルデータを生成するには、以下のコマンドを実行します：

```
python sample_data/generate_sample_data.py
```

このスクリプトは3種類のサンプルデータを生成します：

1. バッチ蒸留データ（batch_distillation_data.csv）:
   - 目的変数：不純物量
   - 変数：温度、圧力、供給速度、触媒濃度
   - 特徴：データはiid（独立同一分布）

2. 連続蒸留データ（continuous_distillation_data.csv）:
   - 目的変数：不純物量
   - 変数：温度、圧力、供給速度、触媒濃度
   - 特徴：自己相関あり

3. 株価データ（stock_price_data.csv）:
   - 目的変数：株価
   - 変数：市場指数、金利、為替レート、原油価格
   - 特徴：ランダムウォーク

これらのサンプルデータを使用して、アプリケーションの各機能をテストしたり、時系列分析の異なる側面を学習したりすることができます。

## プロジェクト構造

```
.
├── pages
│   ├── data_loading.py
│   ├── data_preprocessing.py
│   ├── time_series_analysis.py
│   ├── modeling.py
│   └── prediction.py
├── sample_data
│   └── generate_sample_data.py
├── app.py
├── requirements.txt
└── README.md
```

## 貢献

バグ報告や機能リクエストは、GitHubのIssueを通じてお願いします。プルリクエストも歓迎します。

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。詳細は[LICENSE](LICENSE)ファイルを参照してください。
